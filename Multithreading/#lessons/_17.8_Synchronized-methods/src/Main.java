import java.util.ArrayList;

public class Main {

  // üìç 17.8 Synchronized-–º–µ—Ç–æ–¥—ã

  // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –º–µ—Ç–æ–¥–æ–≤ –∏ –±–ª–æ–∫–æ–≤ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –∫–æ–¥–∞. –û–Ω–∞ –Ω—É–∂–Ω–∞ —á—Ç–æ–±—ã –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–æ–≥–æ –∏–ª–∏ –∏–Ω–æ–≥–æ
  // —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –∫–æ–¥–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –æ–¥–Ω–æ–º –ø–æ—Ç–æ–∫–µ. –ï—Å–ª–∏ –∫ —ç—Ç–æ–º—É —Ñ—Ä–∞–≥–º–µ–Ω—Ç—É –ø—Ä–æ–≥—Ä–∞–º–º–æ–≥–æ –∫–æ–¥–∞
  // –∏–º–µ–µ—é—Ç –¥–æ—Å—Ç—É–ø –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ—Ç–æ–∫–æ–≤ –∏–ª–∏ –æ–Ω –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ—Ç–æ–∫–∞—Ö, —Ç–æ —Ç–æ—Ç –º–µ—Ö–∞–Ω–∏–∑–º –∫–æ—Ç–æ—Ä—ã–π —Å–µ–π—á–∞—Å
  // —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã—Å—Ç—Ä–æ–∏—Ç—å –ø–æ—Ç–æ–∫–∏ –≤ –æ—á–µ—Ä–µ–¥—å –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —ç—Ç–æ–≥–æ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞ –∫–æ–¥–∞ –∏ —Å–¥–µ–ª–∞—Ç—å —ç—Ç–æ —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º
  // —á—Ç–æ–± —ç—Ç–æ—Ç —Ñ—Ä–∞–≥–º–µ–Ω—Ç –∫–æ–¥–∞ –≤—ã–ø–æ–ª–Ω—è–ª—Å—è –≤—Å–µ–≥–¥–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –æ–¥–Ω–æ–º –ø–æ—Ç–æ–∫–µ

  // –ü—Ä–∏–º–µ—Ä
  private static ArrayList<Double> numbers = new ArrayList<>();

  public static void main(String[] args) {
    ArrayList<Thread> threads = new ArrayList<>();
    for (int i = 0; i < 10; i++){
      threads.add(new Thread(Main::someHeavyMethods));
    }
    threads.forEach(t->t.start());
  }

  // Console:
  // 4143885
  // 5210478
  // 625339
  // 164105
  // 136359
  // 323767
  // 226445
  // 117208
  // 286567
  // 375474   –ï—Å–ª–∏ –±—ã –º–µ—Ç–æ–¥ someHeavyMethods() –≤—ã–ø–æ–ª–Ω—è–ª—Å—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –æ–¥–Ω–æ–º –ø–æ—Ç–æ–∫–µ —É –Ω–∞—Å
  // 10 —Ä–∞–∑ —Ä–∞—Å–ø–µ—á–∞—Ç–∞–ª–æ—Å—å –ø–æ 1000000, –∞ –∑–¥–µ—Å—å —Ü–∏—Ñ—Ä—ã —Å—Ç—Ä–∞–Ω–Ω—ã–µ –ø–æ—Ç–æ–º—É —á—Ç–æ —É –Ω–∞—Å —ç—Ç–æ—Ç –º–µ—Ç–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
  // —Å –æ–¥–Ω–æ–π –∫–æ–ª–ª–µ–∫—Ü–∏–µ–π –∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ—Ç–æ–∫–æ–≤, –µ—Å–ª–∏ –±—É–¥–µ–º –∏ –¥–∞–ª—å—à–µ –∑–∞–ø—É—Å–∫–∞—Ç—å —Ç–æ
  // –º–æ–∂–µ–º —Å—Ç–æ–ª–∫–Ω—É—Ç—å—Å—è –∏ —Å –æ—à–∏–±–∫–∞–º–∏. –≠—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ—Ç–æ–º—É —á—Ç–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ—Ç–æ–∫–æ–≤ –º—ã
  // —Ä–∞–±–æ—Ç–∞–µ–º —Å –æ–¥–Ω–æ–π –∏ —Ç–æ–π –∂–µ –∫–æ–ª–ª–µ–∫—Ü–∏–µ–π
  // –ö–∞–∫ —ç—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å? -> —Å–¥–µ–ª–∞—Ç—å —ç—Ç–æ—Ç –º–µ—Ç–æ–¥ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º, –¥–æ–ø–∏—Å–∞—Ç—å –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ synchronized,
  // –æ–Ω–æ –±—É–¥–µ—Ç –æ–±–µ—Å–ø–µ—á–∏–≤–∞—Ç—å –ø–æ —Å—É—Ç–∏ —Ä–∞–±–æ—Ç—É —ç—Ç–æ–≥–æ –º–µ—Ç–æ–¥–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —Ç–æ–ª—å–∫–æ –≤ –æ–¥–Ω–æ–º –ø–æ—Ç–æ–∫–µ, –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ—Ç–æ–∫–∏
  // –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç —Ö–æ—Ç–µ—Ç—å –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å —ç—Ç–æ—Ç –º–µ—Ç–æ–¥ –≤—ã—Å—Ç—Ä–æ—è—Ç—Å—è –∑–∞ –ø–µ—Ä–≤—ã–º –ø–æ—Ç–æ–∫–æ–º –≤ –æ—á–µ—Ä–µ–¥—å.
  // –¢–µ–ø–µ—Ä—å –∑–∞–ø—É—Å—Ç–∏–º —ç—Ç–æ—Ç –º–µ—Ç–æ–¥ –ø–æ —Å—É—Ç–∏ –≤ –æ–¥–Ω–æ–ø–æ—Ç–æ—á–Ω–æ–º —Ä–µ–∂–∏–º–µ –∏ —Ç–µ–ø–µ—Ä—å –≤—Å–µ —Ö–æ—Ä–æ—à–æ:
  // –∫–æ–Ω—Å–æ–ª—å:
  // 1000000
  // 1000000
  // 1000000
  // 1000000
  // 1000000
  // 1000000
  // 1000000
  // 1000000
  // 1000000
  // 1000000

  /*private static void someHeavyMethods() { // –±—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω—è—Ç—å ArrayList —Å–ª—É—á–∞–π–Ω—ã–º–∏ —á–∏—Å–ª–∞–º–∏
    for (int i = 0; i < 1000000; i++) {
      numbers.add(Math.random() / Math.random());
    }
    System.out.println(numbers.size());
    numbers.clear();
  }*/

  private static synchronized void someHeavyMethods() { // –±—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω—è—Ç—å ArrayList —Å–ª—É—á–∞–π–Ω—ã–º–∏ —á–∏—Å–ª–∞–º–∏
    for (int i = 0; i < 1000000; i++) {
      numbers.add(Math.random() / Math.random());
    }
    System.out.println(numbers.size());
    numbers.clear();
  }
}
