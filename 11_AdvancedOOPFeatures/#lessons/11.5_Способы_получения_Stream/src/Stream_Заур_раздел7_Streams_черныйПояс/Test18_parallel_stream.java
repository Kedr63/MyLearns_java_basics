package Stream_–ó–∞—É—Ä_—Ä–∞–∑–¥–µ–ª7_Streams_—á–µ—Ä–Ω—ã–π–ü–æ—è—Å;

import java.util.ArrayList;
import java.util.List;

public class Test18_parallel_stream {
    public static void main(String[] args) {
        // üìå parallel_stream (–ü–°)  ______________________________________________________

        // –ö–æ–≥–¥–∞ —Ä–∞–±–æ—Ç–∞–µ–º —Å–æ —Å—Ç—Ä–∏–º–æ–º, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ—Ç–æ–∫–∏.
        // Parallel_stream - —ç—Ç–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —è–¥–µ—Ä –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏
        // –∫–∞–∫–∏—Ö-–ª–∏–±–æ –æ–ø–µ—Ä–∞—Ü–∏–π —Å–æ —Å—Ç—Ä–∏–º.

        // –ü—Ä–∏–º–µ—Ä: –¥–æ–ø—É—Å—Ç–∏–º –Ω–∞—à —Å—Ç—Ä–∏–º —Å–æ–¥–µ—Ä–∂–∏—Ç –æ—Ç 1 2 3 ....  –¥–æ –º–∏–ª–∏–∞—Ä–¥–∞ —á–∏—Å–µ–ª, –∏ —Å –ø–æ–º–æ—â—å—é —Å—Ç—Ä–∏–º–∞
        // –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã—á–∏—Å–ª–∏—Ç—å –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –µ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤. –ï—Å–ª–∏ –∑–∞–ø—É—Å–∫–∞–µ–º –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π —Å—Ç—Ä–∏–º, —Ç–æ
        // –æ–Ω –Ω–∞—á–∏–Ω–∞–µ—Ç ‚ûî 1 * 2, –∑–∞—Ç–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç —É–º–Ω–æ–∂–∞–µ—Ç –Ω–∞ 3 –∏ —Ç/–¥ –¥–æ –º–∏–ª–∏–∞—Ä–¥–∞.
        // –ï—Å–ª–∏ –∂–µ –º—ã –≥–æ–≤–æ—Ä–∏–º —á—Ç–æ —Ö–æ—Ç–∏–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å parallel_stream –∏ –∫–æ–º–ø—å—é—Ç–µ—Ä –Ω–∞—à –∏–º–µ–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —è–¥–µ—Ä,
        // —Ç–æ —Ç–æ–≥–¥–∞ Java –≥–æ–≤–æ—Ä–∏—Ç —á—Ç–æ –∑–∞—á–µ–º –æ–¥–∏–Ω –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä –¥–æ–ª–∂–µ–Ω –≤—ã–ø–æ–ª–Ω—è—Ç—å –≤—Å—é —ç—Ç—É —Ä–∞–±–æ—Ç—É, –º–æ–∂–Ω–æ –∂–µ —Å–¥–µ–ª–∞—Ç—å
        // –±—ã—Å—Ç—Ä–µ–π ‚ûî –¥–æ–ø—É—Å—Ç–∏–º
        // ‚ûî –æ–¥–∏–Ω –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä –ø—É—Å—Ç—å –ø–µ—Ä–µ–º–Ω–æ–∂–∏—Ç –æ—Ç 1 .... –¥–æ 250_000_000
        // ‚ûî –≤—Ç–æ—Ä–æ–π –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä –ø—É—Å—Ç—å –ø–µ—Ä–µ–º–Ω–æ–∂–∏—Ç –æ—Ç 250_000_001 ... –¥–æ 500_000_000
        // ‚ûî —Ç—Ä–µ—Ç–∏–π –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä –ø—É—Å—Ç—å –ø–µ—Ä–µ–º–Ω–æ–∂–∏—Ç –æ—Ç 500_000_001 ... –¥–æ 750_000_000
        // ‚ûî —á–µ—Ç–≤–µ—Ä—Ç—ã–π –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä –ø—É—Å—Ç—å –ø–µ—Ä–µ–º–Ω–æ–∂–∏—Ç –æ—Ç 750_000_001 ... –¥–æ 1_000_000_000
        // –ß–µ—Ç—ã—Ä–µ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ —Ä–∞–±–æ—Ç–∞—é—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
        // –°—É—Ç—å parallel_stream —Ç–∞–∫–∞—è ‚ûî –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —á–∞—Å—Ç–µ–π –∑–∞–¥–∞–Ω–∏—è –∏ –ø–æ—Ç–æ–º –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–¥–∑–∞–¥–∞–Ω–∏–π
        // –°–∞–º–æ–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–µ —Ç–æ —á—Ç–æ, —á—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å parallel_stream-—ã –Ω–∞–º —Å–∞–º–∏–º –Ω–∏–∫–∞–∫—É—é –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç—å
        // –ø—Ä–∏–º–µ–Ω—è—Ç—å –Ω–µ –Ω–∞–¥–æ, –≤—Å–µ —ç—Ç–æ –¥–µ–ª–∞–µ—Ç Java —Å–∞–º–∞, –∞ –º—ã –ø–∏—à–µ–º —Ç–æ–ª—å–∫–æ –æ–¥–Ω—É –∫–æ–º–∞–Ω–¥—É —á—Ç–æ–±—ã –æ–Ω–∞ –≤—ã–ø–æ–ª–Ω—è–ª–∞
        // –ø–∞—Ä–∞–ª. —Å—Ç—Ä–∏–º–∏–Ω–≥.
        // –ü—Ä–∏–º–µ—Ä
        List<Double> list = new ArrayList<>();
        list.add(10.0);
        list.add(5.0);
        list.add(1.0);
        list.add(0.25);
        // –°–¥–µ–ª–∞—Ç—å —Å—Ç—Ä–∏–º –ø–∞—Ä–∞–ª–ª–µ–ª. –º–æ–∂–Ω–æ –¥–≤—É–º—è —Å–ø–æ—Å–æ–±–∞–º–∏:
        // 1 - —ç—Ç–æ –∫–æ–≥–¥–∞ –º—ã –ø–æ–ª—É—á–∞–µ–º —Å—Ç—Ä–∏–º –∏–∑ –≥–æ—Ç–æ–≤–æ–≥–æ –ª–∏—Å—Ç–∞ (–∏–ª–∏ –∫–æ–ª–ª–µ–∫—Ü–∏–∏), –º—ã –ø—Ä–æ—Å—Ç–æ –º–µ—Ç–æ–¥–∞ stream
        // –≤—ã–∑—ã–≤–∞–µ–º –º–µ—Ç–æ–¥ /parallelStream/—á–∞—â–µ –≤—Å–µ–≥–æ —Ç–∞–∫ –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è /list.parallelStream()/
        // 2 - –∏–ª–∏ –∫–æ–≥–¥–∞ –º—ã —Å–æ–∑–¥–∞–µ–º —Å—Ç—Ä–∏–º —Å –Ω—É–ª—è.
        // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ü–° –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –∫–∞–∫–∏—Ö-—Ç–æ –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π (—Ç–∏–ø–∞ –Ω–∞—Ö–æ–∂–¥–µ–Ω–∏–µ –º–∏–Ω-–º–∞, –º–∞–∫—Å-–º–∞
        // –∏–ª–∏ —Å—É–º–º—ã) –∏ –∞–±—Å–æ–ª—é—Ç–Ω–æ –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –∫–æ–≥–¥–∞ –Ω–∞—à–∏ –¥–µ–π—Å—Ç–≤–∏—è –Ω–∞–¥ —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ –Ω–∞–ø—Ä—è–º—É—é –∑–∞–≤–∏—Å—è—Ç –æ—Ç
        // –∏—Ö –æ—á–µ—Ä–µ–¥–Ω–æ—Å—Ç–∏.
        // –ò –µ—â–µ —Å–∞–º–æ–µ –≥–ª–∞–≤–Ω–æ–µ: –ü–° –Ω–∞–¥–æ —Ç–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–≥–¥–∞ —É –Ω–∞—Å –æ—á–µ–Ω—å –º–Ω–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤, –µ—Å–ª–∏ —É –≤–∞—Å
        // –Ω–µ –º–Ω–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤, —Å–∫–∞–∂–µ–º 10, 20, 100 —ç–ª–µ–º–µ–Ω—Ç–æ–≤, —Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–∞–ª–ª-—Ç–∏ –Ω–∞–æ–±–æ—Ä–æ—Ç –Ω–∞–≤—Ä–µ–¥–∏—Ç,
        // –Ω–µ–º–Ω–æ–≥–æ –¥–∞–∂–µ —É–≤–µ–ª–∏—á–∏—Ç –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞–Ω–∏—è.
        // –í–æ—Å–ø–æ–ª—å–∑—É–µ–º—Å—è –ø–µ—Ä–≤—ã–º –≤–∞—Ä–∏–∞–Ω—Ç–æ–º

        double sumResult = list.stream()
                .reduce((accumulator, element) -> accumulator + element)
                .get();
        System.out.println("sumResult = " + sumResult); // sumResult = 16.25

        // –û–±—ã—á–Ω—ã–π —Å—Ç—Ä–∏–º –ª–µ–≥–∫–æ —Å–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å–æ —Å–ª–æ–∂–µ–Ω–∏–µ–º –≤—Å–µ—Ö —ç—Ç–∏—Ö —á–∏—Å–µ–ª.
        // –¢–∞–∫ –∂–µ –∑–¥–µ—Å—å –º–æ–∂–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ü–° ‚¨á
        double sumResult20 = list.parallelStream()
                .reduce((accumulator, element) -> accumulator + element)
                .get();
        System.out.println("sumResultParallel = " + sumResult20); // sumResult = 16.25

        // –ï—â–µ –ø—Ä–∏–º–µ—Ä
        double divisionResult = list.stream()
                .reduce((accumulator, element) -> accumulator / element)
                .get();
        System.out.println("divisionResult = " + divisionResult);
        /* –∫–æ–Ω—Å–æ–ª—å:
        divisionResult = 8.0 */  // –ø—Ä–æ–≤–µ—Ä–∏–º: 10 / 5 = 2, 2 / 2 = 1, 1 / 0.25 = 8;

        // –ê –µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–º –ü–°, —Ç–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –±—É–¥–µ—Ç –Ω–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π
        double divisionResult20 = list.parallelStream()
                .reduce((accumulator, element) -> accumulator / element)
                .get();
        System.out.println("divisionResultParallel = " + divisionResult20);
       /* –∫–æ–Ω—Å–æ–ª—å:
        divisionResultParallel = 0.5   */  // –ö–∞–∫ —ç—Ç–æ –ø–æ–ª—É—á–∏–ª–æ—Å—å 0.5 ? –°–º–µ—é –ø—Ä–µ–¥–ø–æ–ª–æ–∂–∏—Ç—å —á—Ç–æ –¥–∞–Ω–Ω–æ–µ
        // –∑–∞–¥–∞–Ω–∏–µ –±—ã–ª–æ –ø–æ–¥–µ–ª–µ–Ω–æ –Ω–∞ –¥–≤–µ —á–∞—Å—Ç–∏:
        // - –ø–µ—Ä–≤–∞—è —á–∞—Å—Ç—å –≤—ã–ø–æ–ª–Ω—è–ª–∞ –¥–µ–ª–µ–Ω–∏–µ (10/5) = 2
        // - –≤—Ç–æ—Ä–∞—è —á–∞—Å—Ç—å –≤—ã–ø–æ–ª–Ω—è–ª–∞ –¥–µ–ª–µ–Ω–∏–µ (1/0.25) = 4
        // –ò —Ä–µ–∑—É–ª—å—Ç–∏—Ä—É—é—â–∏–µ (—á–∞—Å—Ç–Ω—ã–µ) –±—ã–ª–∏ –ø–æ–¥–µ–ª–µ–Ω—ã –º–µ–∂–¥—É —Å–æ–±–æ–π (2/4) = 0.5
        // –ü–æ—ç—Ç–æ–º—É –≤ –∏—Ç–æ–≥–µ –º—ã –∏ —É–≤–∏–¥–µ–ª–∏ —Ç–∞–∫–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç.
        // –¢/–µ –≤ —Ç–∞–∫–æ–≥–æ —Ä–æ–¥–∞ –∑–∞–¥–∞–Ω–∏—è—Ö –≥–¥–µ –ø–æ—Ä—è–¥–æ–∫ —ç–ª–µ–º–µ–Ω—Ç–∞ –æ—á–µ–Ω—å —Å–∏–ª—å–Ω–æ –≤–ª–∏—è–µ—Ç, –Ω–∏ –∫ –∫–æ–µ–º —Å–ª—É—á–∞–µ
        // –ü–° –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–µ–ª—å–∑—è.
        // –ò –≤–æ–æ–±—â–µ –Ω–∞—Å—á–µ—Ç —ç—Ç–æ–π –ø–∞—Ä—Ä–∞–ª–µ–ª—å–Ω–æ—Å—Ç–∏ –æ—á–µ–Ω—å –º–Ω–æ–≥–æ —Å–ø–æ—Ä–æ–≤, –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —è–≤–ª—è—é—Ç—Å—è –µ–µ —è—Ä—ã–º–∏
        // –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞–º–∏.
        // –Ø—Å–Ω–æ –æ–¥–Ω–æ —á—Ç–æ –µ–µ –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–≥–¥–∞ —É –≤–∞—Å –æ—á–µ–Ω—å –º–Ω–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∏ –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
        // —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—á–µ–Ω—å –¥–æ–ª–≥–æ, –∞ –≤–∞–º –Ω—É–∂–Ω–æ –µ–≥–æ —É—Å–∫–æ—Ä–∏—Ç—å



    }
}
