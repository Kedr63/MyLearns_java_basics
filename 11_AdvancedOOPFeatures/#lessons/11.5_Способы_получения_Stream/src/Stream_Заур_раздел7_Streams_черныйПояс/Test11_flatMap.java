package Stream_–ó–∞—É—Ä_—Ä–∞–∑–¥–µ–ª7_Streams_—á–µ—Ä–Ω—ã–π–ü–æ—è—Å;

import java.util.ArrayList;
import java.util.List;

public class Test11_flatMap {
    public static void main(String[] args) {

        // üìå –ú–µ—Ç–æ–¥ /flatMap/ (i)  ________________________________________________________

        // –≠—Ç–æ—Ç –º–µ—Ç–æ–¥ –ø–æ—Ö–æ–∂ –Ω–∞ –º–µ—Ç–æ–¥ /map/, –Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–µ–º–Ω–æ–≥–æ –ø–æ –¥—Ä—É–≥–æ–º—É

        Student st1 = new Student("Ivan", 'm', 22, 3, 8.3);
        Student st2 = new Student("Nikolay", 'm', 28, 2, 6.4);
        Student st3 = new Student("Elena", 'f', 19, 1, 8.9);
        Student st4 = new Student("Petr", 'm', 35, 4, 7);
        Student st5 = new Student("Maria", 'f', 23, 3, 9.1);

        // —Å–æ–∑–¥–∞–¥–∏–º —Ñ–∞–∫—É–ª—å—Ç–µ—Ç—ã
        Faculty f1 = new Faculty("Economics");
        Faculty f2 = new Faculty("Applied mathematics");

        // –¥–æ–±–∞–≤–∏–º —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –≤ —Ñ–∞–∫—É–ª—å—Ç–µ—Ç—ã
        f1.addStudentToFaculty(st1);
        f1.addStudentToFaculty(st2);
        f1.addStudentToFaculty(st3);
        f2.addStudentToFaculty(st4);
        f2.addStudentToFaculty(st5);

        // –¢–µ–ø–µ—Ä—å —Å–æ–∑–¥–∞–¥–∏–º –ª–∏—Å—Ç —Ñ–∞–∫—É–ª—å—Ç–µ—Ç–æ–≤
        List<Faculty> facultyList = new ArrayList<>();
        facultyList.add(f1);
        facultyList.add(f2);
        // –¢/–µ –∫–∞–∫—É—é –º—ã –∏–º–µ–µ–º —Å–∏—Ç—É–∞—Ü–∏—é? –£ –Ω–∞—Å –µ—Å—Ç—å –ª–∏—Å—Ç —Ñ–∞–∫—É–ª—å—Ç–µ—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–¥–µ—Ä–∂–∏—Ç —Ñ–∞–∫—É–ª—å—Ç–µ—Ç—ã ‚ûî –∞ —Å–∞–º–∏
        // —Ñ–∞–∫—É–ª—å—Ç–µ—Ç—ã —Å–æ–¥–µ—Ä–∂–∞—Ç –ª–∏—Å—Ç—ã —Å–≤–æ–∏—Ö —Å—Ç—É–¥–µ–Ω—Ç–æ–≤.
        // –ú–µ—Ç–æ–¥ /flatMap/ –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ç–æ–≥–¥–∞, –∫–æ–≥–¥–∞ –Ω–∞–º –Ω–∞–¥–æ –ø–æ—Ä–∞–±–æ—Ç–∞—Ç—å –Ω–µ —Å —Å–∞–º–∏–º–∏ —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ –Ω–∞—à–µ–π
        // –∫–æ–ª–ª–µ–∫—Ü–∏–∏, –∞ —Å —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –Ω–∞—à–µ–π –∫–æ–ª–ª–µ–∫—Ü–∏–∏.
        // –ù–∞–ø—Ä–∏–º–µ—Ä, –≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –º—ã —Ö–æ—Ç–∏–º –≤—ã–≤–µ—Å—Ç–∏ –∏–º–µ–Ω–∞ –≤—Å–µ—Ö —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –∏–∑ –≤—Å–µ—Ö —Ñ–∞–∫—É–ª—å—Ç–µ—Ç–æ–≤:
        facultyList.stream()
                .flatMap(faculty -> faculty.getStudentsOnFaculty()
                        .stream())
                .forEach(e-> System.out.println(e.getName()));

        // –í—ã–∑—ã–≤–∞–µ–º –º–µ—Ç–æ–¥ /flatMap/ ‚¨Ü -> —á—Ç–æ –æ–Ω –¥–µ–ª–∞–µ—Ç? -> –ø–µ—Ä–µ–¥–∞–µ–º —Å—é–¥–∞ —ç–ª–µ–º–µ–Ω—Ç /faculty/ ‚ûî
        // ‚ûî –∏–∑ /faculty/ –ø–æ–ª—É—á–∞–µ–º –¥—Ä—É–≥–æ–π –ª–∏—Å—Ç /faculty.getStudentsOnFaculty()/, –∏ —É–∂–µ –Ω–∞ —ç—Ç–æ–º –ª–∏—Å—Ç–µ -
        // - –Ω–∞ –ª–∏—Å—Ç–µ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ñ–∞–∫—É–ª—å—Ç–µ—Ç–∞ –≤—ã–∑—ã–≤–∞–µ–º –º–µ—Ç–æ–¥ —Å—Ç—Ä–∏–º, —Ç/–µ —Å–Ω–∞—á–∞–ª–∞ –º—ã –∏–º–µ–µ–º
        // —Ñ–∞–∫—É–ª—å—Ç–µ—Ç ‚ûî —Å –ø–æ–º–æ—â—å—é —ç—Ç–æ–≥–æ —Ñ–∞–∫—É–ª—å—Ç–µ—Ç–∞ –º—ã –ø–æ–ª—É—á–∞–µ–º –ª–∏—Å—Ç —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –Ω–∞ —ç—Ç–æ–º —Ñ–∞–∫—É–ª—å—Ç–µ—Ç–µ ‚ûî
        // ‚ûî –∏ —É–∂–µ –Ω–∞ —ç—Ç–æ–º –ª–∏—Å—Ç–µ –º—ã –≤—ã–∑—ã–≤–∞–µ–º —Å—Ç—Ä–∏–º ‚ûî –∏ —É–∂–µ –ø–æ—Ç–æ–º —Å –ø–æ–º–æ—â—å—é –º–µ—Ç–æ–¥–∞ forEach –º—ã –º–æ–∂–µ–º
        // –≤—ã–≤–µ—Å—Ç–∏ –∏–º–µ–Ω–∞ –≤—Å–µ—Ö —Å—Ç—É–¥–µ–Ω—Ç–æ–≤
        /*–∫–æ–Ω—Å–æ–ª—å:
        Ivan Nikolay Elena Petr Maria   */

        // –° –ø–æ–º–æ—â—å—é –º–µ—Ç–æ–¥–∞ /flatMap/ –∏ –≤—ã–∑–æ–≤–∞ –º–µ—Ç–æ–¥–∞ —Å—Ç—Ä–∏–º –Ω–∞ –∫–∞–∂–¥–æ–º —ç–ª–µ–º–µ–Ω—Ç–µ –ª–∏—Å—Ç–∞ —Ñ–∞–∫—É–ª—å—Ç–µ—Ç–æ–≤, –º—ã
        // –¥–ª—è –∫–∞–∂–¥–æ–π –Ω–∞—à–µ–π –∫–æ–ª–ª–µ–∫—Ü–∏–∏ —Å–æ–∑–¥–∞–µ–º –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å—Ç—Ä–∏–º, –∏ –≤—Å–µ —ç—Ç–∏ —Å—Ç—Ä–∏–º—ã –≤ –∏—Ç–æ–≥–µ –æ–±—Ä–∞–∑—É—é—Ç –æ–¥–∏–Ω
        // –±–æ–ª—å—à–æ–π —Å—Ç—Ä–∏–º –∏–∑ –≤—Å–µ—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ facultyList.
        // ‚ù§Ô∏è –ï—â–µ —Ä–∞–∑ –≤ –∫—Ä–∞—Ç—Ü–µ: –º—ã –≤–∑—è–ª–∏ –ø–µ—Ä–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç facultyList-–∞ -> —ç—Ç–æ –ø–µ—Ä–≤—ã–π —Ñ–∞–∫—É–ª—å—Ç–µ—Ç /f1/, –Ω–∞—à–ª–∏ —É
        // –ø–µ—Ä–≤–æ–≥–æ —Ñ–∞–∫—É–ª—å—Ç–µ—Ç–∞ –ª–∏—Å—Ç –µ–≥–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –∏ —Å –ø–æ–º–æ—â—å—é —ç—Ç–æ–≥–æ –ª–∏—Å—Ç–∞ –º—ã –ø–æ–ª—É—á–∞–µ–º –ø–æ—Ç–æ–∫ –∏ –∏–∑ —ç—Ç–æ–≥–æ
        // –ø–æ—Ç–æ–∫–∞ –º—ã –≤—ã–≤–æ–¥–∏–º –∏–º–µ–Ω–∞ –≤—Å–µ—Ö —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ ‚ûî –Ω–∞ —Å–ª–µ–¥—É—é—â–µ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏ –º—ã –ø–æ–ª—É—á–∞–µ–º –≤—Ç–æ—Ä–æ–π —Ñ–∞–∫—É–ª—å—Ç–µ—Ç /f2/ ‚ûî
        // ‚ûî –Ω–∞—Ö–æ–¥–∏–º –≤—Å–µ—Ö —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –Ω–∞ —ç—Ç–æ–º —Ñ–∞–∫—É–ª—å—Ç–µ—Ç–µ ‚ûî –∏–∑ —ç—Ç–æ–≥–æ –ª–∏—Å—Ç–∞ –º—ã –ø–æ–ª—É—á–∞–µ–º –ø–æ—Ç–æ–∫ ‚ûî –∏ –æ–ø—è—Ç—å –≤—ã–≤–æ–¥–∏–º
        // –Ω–∞ —ç–∫—Ä–∞–Ω –∏–º–µ–Ω–∞ –≤—Å–µ—Ö —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –Ω–∞ —Ñ–∞–∫—É–ª—å—Ç–µ—Ç–µ –Ω–æ–º–µ—Ä 2 /f2/.
        // –¢/–µ –≤ —Ç–∞–∫–∏—Ö —Å–ª—É—á–∞—è—Ö –∫–æ–≥–¥–∞ –Ω–∞–º –Ω—É–∂–Ω–æ –ø–æ—Ä–∞–±–æ—Ç–∞—Ç—å —Å —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –Ω–∞—à–µ–≥–æ –ª–∏—Å—Ç–∞ (–Ω–∞—à–µ–π –∫–æ–ª–ª–µ–∫—Ü–∏–∏)
        // –º—ã –º–æ–∂–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–∞–∫–æ–π –º–µ—Ç–æ–¥ /flatMap/.


    }
}

class Faculty {
    String name;
    List<Student> studentsOnFaculty;

    public Faculty(String name) {
        this.name = name;
        studentsOnFaculty = new ArrayList<>();
    }

    public List<Student> getStudentsOnFaculty() {
        return studentsOnFaculty;
    }

    public void addStudentToFaculty(Student st) {
        studentsOnFaculty.add(st);
    }
}