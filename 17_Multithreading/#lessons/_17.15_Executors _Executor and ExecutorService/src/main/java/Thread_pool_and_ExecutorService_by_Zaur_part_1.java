import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;
import java.util.concurrent.TimeUnit;

public class Thread_pool_and_ExecutorService_by_Zaur_part_1 {

  /** üìç –ß–∞—Å—Ç–æ –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ –Ω–∞–º –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–µ –æ–¥–∏–Ω –∏–ª–∏ –¥–≤–∞ –ø–æ—Ç–æ–∫–∞, –∞ –±–æ–ª—å—à–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Ç–æ–∫–æ–≤.
   * –£–ø—Ä–∞–≤–ª—è—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ —Å–æ–∑–¥–∞–Ω–Ω—ã–º–∏ –ø–æ—Ç–æ–∫–∞–º–∏ –Ω–µ—É–¥–æ–±–Ω–æ, –Ω–∞ –ø–æ–º–æ—â—å –ø—Ä–∏—Ö–æ–¥–∏—Ç –º–µ—Ö–∞–Ω–∏–∑–º Thread pool-–æ–≤.
   *
   *   Thread pool - —ç—Ç–æ –º–Ω–æ–∂–µ—Å—Ç–≤–æ –ø–æ—Ç–æ–∫–æ–≤, –∫–∞–∂–¥—ã–π –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç–æ–π –∏–ª–∏ –∏–Ω–æ–π –∑–∞–¥–∞—á–∏.
   *
   *  –í Java –º—ã —Ä–∞–±–æ—Ç–∞–µ–º —Å Thread pool-–º–∏ –ø–æ—Å—Ä–µ–¥—Å—Ç–≤–æ–º –æ–±—ä–µ–∫—Ç–æ–≤ —Ç–∏–ø–∞ Executor (—ç—Ç–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å). –ú—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –¥–≤–∞ –≤–∏–¥–∞
   * Executor-–æ–≤. –ù–∞ —ç—Ç–æ–º —É—Ä–æ–∫–µ –º—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º —Ç–∞–∫–∂–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å - ExecutorService (–≤—ã–ø–æ–ª–Ω—è–µ—Ç —Å–µ—Ä–≤–∏—Å—ã).
   *  Executor –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—Å—è –∫–∞–∫ /–∏—Å–ø–æ–ª—å–Ω–∏—Ç–µ–ª—å/.
   * –í Java —Å Thread pool-–∞–º–∏ —É–¥–æ–±–Ω–µ–µ –≤—Å–µ–≥–æ —Ä–∞–±–æ—Ç–∞—Ç—å –ø–æ—Å—Ä–µ–¥—Å—Ç–≤–æ–º ExecutorService.
   *   */
}

/* –ü—Ä–∏–º–µ—Ä */
class ThreadPoolEx1 {
  /* Thread pool —É–¥–æ–±–Ω–µ–µ –≤—Å–µ–≥–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏—Å–ø–æ–ª—å–∑—É—è factory –º–µ—Ç–æ–¥—ã –∫–ª–∞—Å—Å–∞ Executors:
   * Executors.newFixedThreadPool(int count) - —Å–æ–∑–¥–∞—Å—Ç pool —Å "n" –ø–æ—Ç–æ–∫–∞–º–∏
   * Executors.newSingleThreadExecutor() - —Å–æ–∑–¥–∞—Å—Ç pool —Å –æ–¥–Ω–∏–º –ø–æ—Ç–æ–∫–∞–º–∏  */

  public static void main(String[] args) throws InterruptedException {
    ExecutorService executorService = Executors.newFixedThreadPool(5);
 /* –ó–¥–µ—Å—å –º—ã —Å–æ–∑–¥–∞–ª–∏ –ø—É–ª –Ω–µ —Å –ø–æ–º–æ—â—å—é –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞, –∞ —Å –ø–æ–º–æ—â—å—é –º–µ—Ç–æ–¥–∞, –ø–æ—ç—Ç–æ–º—É –æ–Ω –∏ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è factory (—Ñ–∞–±—Ä–∏–∫–∞
    –ø–æ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤—É –æ–±—ä–µ–∫—Ç–æ–≤), –≤ –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ –ø–æ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤—É Thread pool-–æ–≤ */
    for (int i = 0; i < 10; i++) {
      executorService.execute(new RunnableImp1100());
    }
    executorService.shutdown();
    executorService.awaitTermination(5, TimeUnit.SECONDS);
    System.out.println("Main ends");
  }
}

class RunnableImp1100 implements Runnable {

  @Override
  public void run() {
    System.out.println(Thread.currentThread().getName());
    try {
      Thread.sleep(500);
    } catch (InterruptedException e) {
      throw new RuntimeException(e);
    }
  }
}  /* –ö–æ–Ω—Å–æ–ª—å
pool-1-thread-1
pool-1-thread-3
pool-1-thread-2
pool-1-thread-4
pool-1-thread-5
Main ends
pool-1-thread-3
pool-1-thread-1
pool-1-thread-2
pool-1-thread-4
pool-1-thread-5 */
/* –†–∞–∑–±–µ—Ä–µ–º—Å—è —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ: –≤–Ω—É—Ç—Ä–∏ –ø–æ—Ç–æ–∫–∞ main –±—ã–ª —Å–æ–∑–¥–∞–Ω /Thread pool/ –∏–∑ –ø—è—Ç–∏ –ø–æ—Ç–æ–∫–æ–≤,
–ø–æ—Ç–æ–º —Å  –ø–æ–º–æ—â—å—é –º–µ—Ç–æ–¥–∞ /.execute(new RunnableImp1100())/ –¥–µ—Å—è—Ç—å —Ä–∞–∑ –ø–µ—Ä–µ–¥–∞–ª–∏ –∫–∞–∫–æ–µ-—Ç–æ –∑–∞–¥–∞–Ω–∏–µ - new RunnableImp1100().
üìç –ù–∞ —á—Ç–æ —Å—Ç–æ–∏—Ç –æ–±—Ä–∞—Ç–∏—Ç—å –≤–Ω–∏–º–∞–Ω–∏–µ: –ö–∞–∫ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ä–∞–±–æ—Ç–∞ –ø—É–ª–∞? –ú—ã –≤–∏–¥–∏–º —á—Ç–æ –∫–∞–∂–¥—ã–π –ø–æ—Ç–æ–∫ –≤—ã–ø–æ–ª–Ω–∏–ª –ø–æ 2 –∑–∞–¥–∞–Ω–∏—è - 5 –ø–æ—Ç–æ–∫–æ–≤
–ø–æ 2 –∑–∞–¥–∞–Ω–∏—è - 10 task-–æ–≤. –ò –≤—Ä–µ–º—è –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è –Ω–∞—à–µ–≥–æ –∑–∞–¥–∞–Ω–∏—è-—Ç–∞—Å–∫–∞ –≤—Å–µ–≥–æ 0,5—Å (Thread.sleep(500)).
–ß—É—Ç—å –ø–æ–¥—Ä–æ–±–Ω–µ–π: /Thread pool-–æ–º/ –ø–æ–ª—É—á–µ–Ω–æ –ø–µ—Ä–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ, 1-–π –ø–æ—Ç–æ–∫ –Ω–∞—á–∞–ª –≤—ã–ø–æ–ª–Ω—è—Ç—å —ç—Ç–æ—Ç —Ç–∞—Å–∫, –∫ –Ω–∞–º –µ—â–µ –ø–æ—Å—Ç—É–ø–∏–ª —ç—Ç–æ—Ç —Ç–∞—Å–∫,
–∏–¥–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∞ –µ—Å—Ç—å –ª–∏ —Å–≤–æ–±–æ–¥–Ω—ã–π –ø–æ—Ç–æ–∫ –≤ –Ω–∞—à–µ–º /Thread pool-–µ/ -> –¥–∞, –µ—Å—Ç—å -> thread-3 –≤–∑—è–ª—Å—è –∑–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è 2-–≥–æ –∑–∞–¥–∞–Ω–∏—è ->
–ø–æ—Å—Ç—É–ø–∏–ª–æ –µ—â–µ –∑–∞–¥–∞–Ω–∏–µ, –µ—Å—Ç—å —Å–≤–æ–±–æ–¥–Ω—ã–π –ø–æ—Ç–æ–∫ –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–µ—Ç –µ–≥–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å? -> –¥–∞ -> thread-2 -> –ø–æ—Ç–æ–º thread-4, –ø–æ—Ç–æ–º
6-–µ –∑–∞–¥–∞–Ω–∏–µ –ø–æ—Å—Ç—É–ø–∞–µ—Ç –∏ /Thread pool/ –≥–æ–≤–æ—Ä–∏—Ç- "–ø–æ–¥–æ–∂–¥–∏—Ç–µ, –ø–æ–∫–∞ —á—Ç–æ —Å–≤–æ–±–æ–¥–Ω—ã—Ö –ø–æ—Ç–æ–∫–æ–≤ –Ω–µ—Ç, –∫–∞–∫ –ø–µ—Ä–≤—ã–π –æ—Å–≤–æ–±–æ–¥–∏—Ç—Å—è
—è –Ω–∞–∑–Ω–∞—á—É –µ–º—É —à–µ—Å—Ç–æ–µ –∑–∞–¥–∞–Ω–∏–µ" -> –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç—Å—è thread-1 –∏ –µ–º—É –Ω–∞–∑–Ω–∞—á–∞–µ—Ç—Å—è —à–µ—Å—Ç–æ–µ –∑–∞–¥–∞–Ω–∏–µ –∏ —Ç–¥ –∏ —Ç–æ–º—É –ø–æ–¥–æ–±–Ω–æ–µ,
—Ç.–µ. 5 –ø–æ—Ç–æ–∫–æ–≤ —Ä–∞–±–æ—Ç–∞—é—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –ø–æ–∫–∞ –µ—Å—Ç—å –∑–∞–¥–∞–Ω–∏–µ, –æ—Å–≤–æ–±–æ–¥–∏–ª—Å—è –ø–æ—Ç–æ–∫ –æ–ø—è—Ç—å –≤–∑—è–ª –∑–∞–¥–∞–Ω–∏–µ –∏ –Ω–∞—á–∞–ª —Ä–∞–±–æ—Ç–∞—Ç—å
  */

/* –ê –µ—Å–ª–∏ —É–±–µ—Ä–µ–º Thread.sleep(500);
–ö–æ–Ω—Å–æ–ª—å:
pool-1-thread-1
pool-1-thread-4
pool-1-thread-3
pool-1-thread-2
Main ends
pool-1-thread-5
pool-1-thread-5
pool-1-thread-5
pool-1-thread-5
pool-1-thread-5
pool-1-thread-5     –ü–æ–ª—É—á–∏—Ç—Å—è —á—Ç–æ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –ø–æ—Ç–æ–∫–∏ —Å–¥–µ–ª–∞—é—Ç —Ä–∞–±–æ—Ç—É –±–æ–ª—å—à–µ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö, —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ.
 –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ç–∞—Å–∫–∏ –≤—ã–ø–æ–ª–Ω–∏–ª —Ç–æ–ª—å–∫–æ 5-–π –ø–æ—Ç–æ–∫, –ø–æ—á–µ–º—É? 5-–π –ø–æ—Ç–æ–∫ –≤–∑—è–ª 5-–π —Ç–∞—Å–∫ –∏ –ø–æ–∫–∞ 6-–π —Ç–∞—Å–∫ –Ω–µ –ø–æ—Å—Ç—É–ø–∏–ª
 –µ—â–µ –∫ –Ω–∞—à–µ–º—É Thread pool-—É, 5-–π –ø–æ—Ç–æ–∫ —É–∂–µ –≤—ã–ø–æ–ª–Ω–∏–ª 5-–π —Ç–∞—Å–∫, –ø–æ—Å—Ç—É–ø–∞–µ—Ç 6-–π —Ç–∞—Å–∫ -> –≥–æ–≤–æ—Ä–∏—Ç: "–ö—Ç–æ –≤–æ–∑—å–º–µ—Ç
 –µ–≥–æ?" -> 5-–π –ø–æ—Ç–æ–∫ –≤–∑—è–ª —ç—Ç–æ—Ç —Ç–∞—Å–∫ –∏ –æ–Ω —Ç–æ–∂–µ –º–æ–º–µ–Ω—Ç–∞–ª—å–Ω–æ –≤—ã–ø–æ–ª–Ω—è–µ—Ç 6-–π —Ç–∞—Å–∫.
 */

/** –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ —á—Ç–æ –Ω–∞—à–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –Ω–µ –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç —Å–≤–æ—é —Ä–∞–±–æ—Ç—É, –∞ –≤—Å–µ –ø–æ—Ç–æ–º—É —á—Ç–æ ExecutorService –∂–¥–µ—Ç
* –Ω–æ–≤—ã—Ö —Ç–∞—Å–∫–æ–≤ —á—Ç–æ–±—ã —Å–ø—Ä–∞–≤–∏—Ç—Å—è –∏ —Å –Ω–∏–º–∏, –ø–æ—ç—Ç–æ–º—É –ø—Ä–æ–≥—Ä–∞–º–º–∞ –Ω–µ –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è. –ï—Å–ª–∏ –º—ã –Ω–µ –Ω–∞–º–µ—Ä–µ–Ω—ã –¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã–µ —Ç–∞—Å–∫–∏,
* —Ç–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –Ω—É–∂–Ω–æ –∑–∞–∫–∞–Ω—á–∏–≤–∞—Ç—å —Ä–∞–±–æ—Ç—É ExecutorService-–∞ –¥–æ–±–∞–≤–∏–≤ –º–µ—Ç–æ–¥ shutdown(). –í—ã–∑–≤–∞–≤ —ç—Ç–æ—Ç –º–µ—Ç–æ–¥ –º—ã –≥–æ–≤–æ—Ä–∏–º
* —á—Ç–æ –∑–∞–¥–∞—á –±–æ–ª—å—à–µ –Ω–µ –±—É–¥–µ—Ç, –∏ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –≤—Å–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è –≤—ã–ø–æ–ª–Ω—è—Ç—Å—è   */

/* –ú–µ—Ç–æ–¥ execute –ø–µ—Ä–µ–¥–∞–µ—Ç –Ω–∞—à–µ –∑–∞–¥–∞–Ω–∏–µ (task) –≤ thread pool, –≥–¥–µ –æ–Ω–æ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –æ–¥–Ω–∏–º –∏–∑ –ø–æ—Ç–æ–∫–æ–≤  */

/* –ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º–µ—Ç–æ–¥–∞ shutdown() ExecutorService –ø–æ–Ω–∏–º–∞–µ—Ç, —á—Ç–æ –Ω–æ–≤—ã—Ö –∑–∞–¥–∞–Ω–∏–π –±–æ–ª—å—à–µ –Ω–µ –±—É–¥–µ—Ç –∏,
* –≤—ã–ø–æ–ª–Ω–∏–≤ –ø–æ—Å—Ç—É–ø–∏–≤—à–∏–µ –¥–æ —ç—Ç–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è, –ø—Ä–µ–∫—Ä–∞—â–∞–µ—Ç —Ä–∞–±–æ—Ç—É. */

/* awaitTermination (–ø–æ—Ö–æ–∂ –Ω–∞ –º–µ—Ç–æ–¥ join) –∑–∞—Å—Ç–∞–≤–ª—è–µ—Ç –æ–∂–∏–¥–∞—Ç—å –ø–æ—Ç–æ–∫ –≤ –∫–æ—Ç–æ—Ä–æ–º –æ–Ω –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è. –í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –≤—ã–∑—ã–≤–∞–µ–º
 –≤–Ω—É—Ç—Ä–∏ –ø–æ—Ç–æ–∫–∞ main, –∑–Ω–∞—á–∏—Ç –ø–æ—Ç–æ–∫ main –±—É–¥–µ—Ç –∂–¥–∞—Ç—å, –ø–æ–∫–∞ ExecutorService –Ω–µ –∑–∞–∫–æ–Ω—á–∏—Ç –≤—Å—é —Å–≤–æ—é —Ä–∞–±–æ—Ç—É –ª–∏–±–æ –Ω–µ –ø—Ä–æ–π–¥–µ—Ç
  —É–∫–∞–∑–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è –≤ –º–µ—Ç–æ–¥–µ (–∑–¥–µ—Å—å 5—Å). –ï—Å–ª–∏ –ø–µ—Ä–≤—ã–º —Å—Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ –≤—Ä–µ–º–µ–Ω–∏ awaitTermination, —Ç–æ main –ø–æ—Ç–æ–∫ –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è, –∞
  ExecutorService –µ—â–µ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å —Å–≤–æ–∏ —Ç–∞—Å–∫–∏  */

/* –ï—Å—Ç—å –µ—â–µ factory –º–µ—Ç–æ–¥ Executors.newSingleThreadExecutor(), –æ–Ω –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –ø–æ—Ç–æ–∫ */