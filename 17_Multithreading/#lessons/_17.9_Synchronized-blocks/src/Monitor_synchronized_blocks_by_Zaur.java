public class Monitor_synchronized_blocks_by_Zaur {

  // üìç –ü–æ–Ω—è—Ç–∏–µ "–º–æ–Ω–∏—Ç–æ—Ä"
  // –ú–æ–Ω–∏—Ç–æ—Ä - —ç—Ç–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º –±–ª–∞–≥–æ–¥–∞—Ä—è –∫–æ—Ç–æ—Ä–æ–º—É –¥–æ—Å—Ç–∏–≥–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –ø—Ä–∏
  // —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏. –í Java —É –∫–∞–∂–¥–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ –∏–ª–∏ –∫–ª–∞—Å—Å–∞ –µ—Å—Ç—å –ø—Ä–∏–≤—è–∑–∞–Ω–Ω–∞—è –∫ –Ω–µ–º—É —Å—É—â–Ω–æ—Å—Ç—å –∫–æ—Ç–æ—Ä–∞—è
  // –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è –º–æ–Ω–∏—Ç–æ—Ä. –ú–æ–Ω–∏—Ç–æ—Ä –º–æ–∂–µ—Ç –∏–º–µ—Ç—å —Å—Ç–∞—Ç—É—Å —Å–≤–æ–±–æ–¥–µ–Ω –∏–ª–∏ –∑–∞–Ω—è—Ç. –ò–º–µ–Ω–Ω–æ —ç—Ç–æ—Ç –º–µ—Ö–∞–Ω–∏–∑–º
  // –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ Java –∫–æ–≥–¥–∞ –º—ã –ø–∏—à–µ–º –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ \synchronized\. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –∫–æ–≥–¥–∞ –æ–¥–∏–Ω –ø–æ—Ç–æ–∫
  // –∑–∞—Ö–æ–¥–∏—Ç –≤ –æ–±–ª–∞—Å—Ç—å –∫–æ–¥–∞ –∫–æ—Ç–æ—Ä–∞—è –ø–æ–º–µ—á–µ–Ω–∞ –∫–∞–∫ \synchronized\, –º–æ–Ω–∏—Ç–æ—Ä –æ–±—ä–µ–∫—Ç–∞ –∏–ª–∏ –∫–ª–∞—Å—Å–∞ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç
  // —Å–æ—Å—Ç–æ—è–Ω–∏–µ "–∑–∞–Ω—è—Ç–æ". –í –æ–¥–Ω–æ –∏ —Ç–æ–∂–µ –≤—Ä–µ–º—è –º–æ–Ω–∏—Ç–æ—Ä –º–æ–∂–µ—Ç –∑–∞–Ω–∏–º–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–Ω–∏–º –ø–æ—Ç–æ–∫–æ–º –∏ —Ç–µ–ø–µ—Ä—å
  // —É–∂–µ –Ω–∏–∫–∞–∫–æ–π –ø–æ—Ç–æ–∫, –ø–æ–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä –Ω–µ —Å—Ç–∞–Ω–µ—Ç —Å–≤–æ–±–æ–¥–Ω—ã–º, –Ω–µ —Å–º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å —ç—Ç–∏–º –∫–æ–¥–æ–º.
  // –î—Ä—É–≥–∏–º–∏ —Å–ª–æ–≤–∞–º–∏ –∫–æ–≥–¥–∞ –º–æ–Ω–∏—Ç–æ—Ä —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∑–∞–Ω—è—Ç—ã–º - –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç lock, —Ç.–µ. —Å—Ç–∞–≤–∏—Ç—Å—è –∑–∞–º–æ–∫: —Å—Ç–∞–≤–∏—Ç—Å—è
  // –∑–∞–º–æ–∫ –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –ø–æ—Ç–æ–∫–æ–≤. –ö–æ–≥–¥–∞ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –ø–æ—Ç–æ–∫ –¥–µ–ª–∞—é—â–∏–π —Ä–∞–±–æ—Ç—É –≤ synchronized-–∫–æ–¥–µ
  // –∑–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç —Ä–∞–±–æ—Ç—É, lock —Å–Ω–∏–º–∞–µ—Ç—Å—è –∏ –º–æ–Ω–∏—Ç–æ—Ä —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Å–≤–æ–±–æ–¥–Ω—ã–º, –¥–æ —Ç–µ—Ö –ø–æ—Ä –ø–æ–∫–∞ —Å–ª–µ–¥—É—é—â–∏–π –ø–æ—Ç–æ–∫
  // –Ω–µ –∑–∞–±–µ—Ä–µ—Ç—Å—è –≤ synchronized-–∫–æ–¥. –¢.–µ. –º—ã –∑–∞–∫—Ä—ã–≤–∞–µ–º –¥–≤–µ—Ä—å –∫–æ–≥–¥–∞ –º–æ–Ω–∏—Ç–æ—Ä –∑–∞–Ω—è—Ç, –∫–æ–≥–¥–∞ –º–æ–Ω–∏—Ç–æ—Ä
  // —Å–≤–æ–±–æ–¥–Ω—ã–π - –º—ã –æ—Ç–∫—Ä—ã–≤–∞–µ–º –¥–≤–µ—Ä—å –¥–ª—è –¥—Ä—É–≥–∏—Ö –ø–æ—Ç–æ–∫–æ–≤, –∏ –∫–∞–∫–æ–π –ø–µ—Ä–≤—ã–π –ø–æ—Ç–æ–∫ –∑–∞–π–¥–µ—Ç –∏ –∑–∞–π–º–µ—Ç –º–æ–Ω–∏—Ç–æ—Ä —Ç–æ—Ç
  // –∏ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –∫–æ–¥–æ–º. –°—É—Ç—å —Ç–∞–∫–æ–≤–∞.
  //      –û—á–µ–Ω—å –≤–∞–∂–Ω–æ–µ –∑–∞–º–µ—á–∞–Ω–∏–µ üìå: –ª—é–±–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Å –ø–æ–º–æ—â—å—é —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –∏–¥–µ—Ç –Ω–∞ –æ–±—ä–µ–∫—Ç–µ –∏–ª–∏
  // –Ω–∞ –∫–ª–∞—Å—Å–µ, –∞ –Ω–µ –Ω–∞ –∫–∞–∫–æ–º-—Ç–æ –∫–æ–¥–µ, —Ç.–µ. –º—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ–º—Å—è –∏—Å–ø–æ–ª—å–∑—É—è –º–æ–Ω–∏—Ç–æ—Ä –æ–±—ä–µ–∫—Ç–∞ –∏–ª–∏ –∫–ª–∞—Å—Å–∞,
  // —Ç.–µ. —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∏–¥–µ—Ç –Ω–∞ —ç—Ç–æ–º —É—Ä–æ–≤–Ω–µ. –£ –º–µ—Ç–æ–¥–∞, –∫–æ–≥–¥–∞ –º—ã –ø–∏—à–µ–º synchronized-–º–µ—Ç–æ–¥—ã, –Ω–µ—Ç –Ω–∏–∫–∞–∫–æ–≥–æ
  // –º–æ–Ω–∏—Ç–æ—Ä–∞, –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –º–µ—Ç–æ–¥–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –º–æ–Ω–∏—Ç–æ—Ä—ã –æ–±—ä–µ–∫—Ç–∞ –∏–ª–∏ –∫–ª–∞—Å—Å–∞.

  // synchronized-–±–ª–æ–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç —Ç–∞–∫–∂–µ –∫–∞–∫ –∏ synchronized-–º–µ—Ç–æ–¥—ã, —Ç–æ–ª—å–∫–æ –æ–±—ã—á–Ω–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç –Ω–µ –≤–µ—Å—å
  // –∫–æ–¥ –≤ –º–µ—Ç–æ–¥–µ, –∞ –ª–∏—à—å –µ–≥–æ —á–∞—Å—Ç—å

}

class SynchronizedBlock1 {

  public static void main(String[] args) {
    MyRunnableImpl1 runnableImpl1 = new MyRunnableImpl1();     // —Å–∏–Ω—Ö—Ä-—Ü–∏—è –±—É–¥–µ—Ç –∏–¥—Ç–∏ –Ω–∞ —ç—Ç–æ–º –æ–±—ä–µ–∫—Ç–µ
    Thread thread1 = new Thread(runnableImpl1);
    Thread thread2 = new Thread(runnableImpl1);
    Thread thread3 = new Thread(runnableImpl1);
    thread1.start();
    thread2.start();
    thread3.start();
  }
  // –∫–æ–Ω—Å–æ–ª—å:
  // Ura!!
  // Ura!!
  // Ura!!
  // 1
  // Ura!!
  // 2
  // Ura!!
  // 3
  // Ura!!
  // 4
  // Ura!!
  // 5
  // Ura!!
  // 6
  // 7
  // Ura!!
  // 8
  // 9
  //      –ö–∞–∫ –≤–∏–¥–∏–º –Ω–∏–∫–∞–∫–æ–≥–æ –æ—Ç–ª–∏—á–∏—è –æ—Ç synchronized-–º–µ—Ç–æ–¥–∞ –Ω–µ –≤–∏–¥–∏–º. –ü–æ—á–µ–º—É? –ü–æ—Ç–æ–º—É —á—Ç–æ –º—ã –≤–∑—è–ª–∏ –∏ –≤–µ—Å—å –∫–æ–¥ –∫–æ—Ç–æ—Ä—ã–π –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤
  //      doWork() —Å–∏–Ω—Ö—Ä-–ª–∏. –í–æ–∑–Ω–∏–∫–∞–µ—Ç –≤–æ–ø—Ä–æ—Å, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ª–∏ –∫–∞–∫–æ–π-–Ω–∏–±—É–¥—å –º–æ–Ω–∏—Ç–æ—Ä synchronized –º–µ—Ç–æ–¥–∞? –ö–æ–≥–¥–∞ –º—ã –≤ –º–µ—Ç–æ–¥–µ –ø–∏—à–µ–º synchronized -
  // –º–æ–Ω–∏—Ç–æ—Ä –∫–∞–∫–æ–≥–æ-—Ç–æ –∫–ª–∞—Å—Å–∞ –∏–ª–∏ –æ–±—ä–µ–∫—Ç–∞ –∏—Å–ø–û–ª—å–∑–æ–≤–∞–ª—Å—è? –î–∞, –∫–æ–Ω–µ—á–Ω–æ, –∏–Ω–∞—á–µ –ø—Ä–æ—Å—Ç–æ –Ω–∏–∫–∞–∫. –ü—Ä–æ—Å—Ç–æ –∫–æ–≥–¥–∞ –º—ã –∏—Å–ø–æ–ª-–µ–º synchronized –º–µ—Ç–æ–¥–∞ —Ç–æ
  // –º—ã —è–≤–Ω–æ —Å–∞–º–∏ –Ω–µ —É–∫–∞–∑—ã–≤–∞–µ–º —ç—Ç–æ—Ç –æ–±—ä–µ–∫—Ç –∏–ª–∏ –∫–ª–∞—Å—Å, –∞ –∫–æ–≥–¥–∞ –º—ã –∏—Å–ø–æ–ª-–µ–º synchronized-–±–ª–æ–∫ –º—ã –¥–æ–ª–∂–Ω—ã –≤ () —É–∫–∞–∑–∞—Ç—å –º–æ–Ω–∏—Ç–æ—Ä –∫–∞–∫–æ–≥–æ
  // –æ–±—ä–µ–∫—Ç–∞ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª-—Å—è –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏. –ö–æ–≥–¥–∞ –º—ã —Ä–∞–±–æ—Ç–∞–µ–º —Å synchronized-–º–µ—Ç–æ–¥–∞–º–∏, –µ—Å–ª–∏ —É –Ω–∞—Å –º–µ—Ç–æ–¥ –Ω–µ —Å—Ç–∞—Ç–∏—á–Ω—ã–π,
  // —Ç–æ –≤—Å–µ–≥–¥–∞ –∏–¥–µ—Ç —Å–∏–Ω—Ö—Ä-—Å—è –Ω–∞ –æ–±—ä–µ–∫—Ç–µ this
}

class Counter {
  static int count = 0;
}

class MyRunnableImpl1 implements Runnable {
  private void doWork2(){
    System.out.println("Ura!!");
  }

  private void doWork() {
    doWork2();
    synchronized (this) {  // –≤ () –ø–∏—à–µ–º –æ–±—ä–µ–∫—Ç –∏–ª–∏ –∫–ª–∞—Å—Å –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –±—É–¥–µ–º —Å–∏–Ω—Ö—Ä-—Ç—å—Å—è, —Ç.–µ. –æ–±—ä–µ–∫—Ç, —á–µ–π –º–æ–Ω–∏—Ç–æ—Ä –±—É–¥–µ–º –∏—Å–ø–æ–ª-—Ç—å –¥–ª—è —Å–∏–Ω—Ö—Ä-—Ü–∏–∏
      Counter.count++;      // —ç—Ç–∏ –¥–≤–µ —Å—Ç—Ä–æ—á–∫–∏ –∫–æ–¥–∞ –≤ {} –±—É–¥—É—Ç —Å–∏–Ω—Ö—Ä-–Ω—ã
      System.out.println(Counter.count);
    }  // –∑–¥–µ—Å—å —Å–∏–Ω—Ö—Ä-—è –±—É–¥–µ—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å –Ω–∞ –æ–±—ä–µ–∫—Ç–µ (this), —Ç.–µ. –∫–æ–≥–¥–∞ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –º–µ—Ç–æ–¥ doWork() - –æ–Ω –Ω–µ —Å—Ç–∞—Ç–∏—á-–π, –ø–æ—ç—Ç–æ–º—É –ø–µ—Ä–µ–¥ —Ç–µ–º –∫–∞–∫ –µ–≥–æ
  }  // –≤—ã–∑–≤–∞—Ç—å –º—ã –¥–æ–ª–∂–Ω—ã –±—É–¥–µ–º —Å–æ–∑–¥–∞—Ç—å –æ–±—ä–µ–∫—Ç MyRunnableImpl1 –∏ –º—ã –≤ main —Å–æ–∑–¥–∞–ª–∏ runnableImpl1 –∏ —Å–∏–Ω—Ö—Ä-—Ü–∏—è –±—É–¥–µ—Ç –∏–¥—Ç–∏ –Ω–∞ —ç—Ç–æ–º runnableImpl1

  @Override
  public void run() {
    for (int i = 0; i < 3; i++) {
      doWork();
    }
  }
}
// üìå –ß–µ–º –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è synchronized-–º–µ—Ç–æ–¥ –æ—Ç synchronized-–±–ª–æ–∫–∞?
// –°–∞–º–æ–µ –≥–ª–∞–≤–Ω–æ–µ –æ—Ç–ª–∏—á–∏–µ synchronized-–±–ª–æ–∫–∞ –≤ —Ç–æ–º —á—Ç–æ –º—ã –º–æ–∂–µ–º —Å–∏–Ω—Ö—Ä-—Ç—å –Ω–µ –≤–µ—Å—å –º–µ—Ç–æ–¥ –∞ –µ–≥–æ —á–∞—Å—Ç—å. –ù–∞–ø—Ä–∏–º–µ—Ä, —É –Ω–∞—Å –µ—Å—Ç—å –µ—â–µ –æ–¥–∏–Ω
// –º–µ—Ç–æ–¥ doWork2() –≤ –∫–ª–∞—Å—Å–µ MyRunnableImpl1, –∏ –º—ã –º–æ–∂–µ–º –≤ doWork() –≤—ã–∑—ã–≤–∞—Ç—å doWork2(), –∏ —á—Ç–æ —Ç–æ–≥–¥–∞ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç?
// –£ –º–µ—Ç–æ–¥–∞ doWork() —á–∞—Å—Ç—å –Ω–µ —Å–∏–Ω—Ö—Ä-–Ω–∞, –∞ —á–∞—Å—Ç—å –∫–æ–¥–∞ —Å–∏–Ω—Ö—Ä-–Ω–∞ —Å –ø–æ–º–æ—â—å—é synchronized-–±–ª–æ–∫–∞, —Ç.–µ. –∫–æ–≥–¥–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ—Ç–æ–∫–æ–≤ –∑–∞—Ö–æ—Ç—è—Ç –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è
// –∫ –º–µ—Ç–æ–¥—É doWork(), –æ–Ω–∏ –≤—Å–µ —Å—Ä–∞–∑—É –∑–∞—Ö–æ–¥—è—Ç –≤ —ç—Ç–æ—Ç –º–µ—Ç–æ–¥ , –≤—Å–µ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —Å–º–æ–≥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –º–µ—Ç–æ–¥–æ–º doWork2(),
// –Ω–æ –∫–æ–≥–¥–∞ –¥–µ–ª–æ –¥–æ–π–¥–µ—Ç –¥–æ synchronized-–±–ª–æ–∫–∞, —Ç–æ –≤ –Ω–µ–≥–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —Å–º–æ–∂–µ—Ç –ø–æ–ø–∞—Å—Ç—å
// —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –ø–æ—Ç–æ–∫, –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –±—É–¥—É—Ç –∂–¥–∞—Ç—å. –¢.–µ. –µ—Å–ª–∏ –º—ã —É–≤–µ—Ä–µ–Ω—ã —á—Ç–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ doWork2() –Ω–µ –º–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å –∫–∞–∫–∏–µ-–ª–∏–±–æ –ø—Ä–æ–±–ª–µ–º—ã
// —Ç–∏–ø–∞ date_race, —Ç–æ –ø–æ—á–µ–º—É —ç—Ç—É —á–∞—Å—Ç—å –∫–æ–¥–∞ –Ω–µ –¥–∞—Ç—å –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Å—Ä–∞–∑—É –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –ø–æ—Ç–æ–∫–∞–º–∏. –≠—Ç–æ –æ—Å–Ω–æ–≤–Ω–æ–µ –æ—Ç–ª–∏—á–∏–µ synchronized-–º–µ—Ç–æ–¥–æ–≤ –æ—Ç
// synchronized-–±–ª–æ–∫–æ–≤.

